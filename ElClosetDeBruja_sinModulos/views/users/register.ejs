<%-include("../partials/head.ejs")%>

<body>
    <%-include('../partials/header.ejs')%>

    <main>
        <section id="section-register">
            <article class ="register-form-container">
                <h2 class="register-title">Registrarse</h2>

                <form action="/users/register" method="POST" class="register-form" id="registerForm">

                    <div class="input-container">
                        <input type="email" name="email" id="email" class="form-input" placeholder="Email" autocomplete="off" min="6" max="50" required >
                        <label for="email" class="register-label-input"></label>
                        <span class="error" id="error-email"></span>
                    </div>

                    <div class="input-container">
                        <input type="text" name="name" id="name" class="form-input" placeholder="Nombre" autocomplete="off" min="6" max="50" required >
                        <label for="name" class="register-label-input"></label>
                        <span class="error" id="error-nombre"></span>
                    </div>

                    <div class="input-container">
                        <input type="text" name="surname" id="surname" class="form-input" placeholder="Apellido" autocomplete="off"  min="6" max="50" required >
                        <label for="surname" class="register-label-input"></label>
                        <span class="error" id="error-apellido"></span>
                    </div>

                    <div class="input-container">
                        <input type="password" name="password" id="password" class="form-input" placeholder="Contraseña" autocomplete="off" required >
                        <label for="email" class="register-label-input"></label>
                        <span class="error" id="error-password"></span>
                    </div>

                    <div class="input-container">
                        <input type="password" name="confirmPassword" id="confirmPassword" class="form-input" placeholder=" Confirmar contraseña" autocomplete="off" required >
                        <label for="email" class="register-label-input"></label>
                        <span class="error" id="error-confirmPassword"></span>
                    </div>

                    <!--agregar checkout Aceptar terminos y condiciones-->
                    
                    <div class="register-btn-container">
                        <button type="submit">Enviar</button>
                        <button type="reset">Borrar</button>
                    </div>

                    <div class="register-a-login-container">
                        <p>¿Ya tenés cuenta?</p>
                        <a href="/users/login">Iniciar sesión</a>
                    </div>
                    
        
                </form>
            </article>
        </section>
    </main>

    <%-include("../partials/footer.ejs")%>

    <script>

    const submitListener = (event) => {
        event.preventDefault()
        validarFormulario()
    }
    document.getElementById('registerForm').addEventListener('submit', submitListener);


    function validarFormulario() {
        let isValid = true;

        // Obtenemos los valores de los campos del formulario
        const email = document.getElementById('email').value;
        const nombre = document.getElementById('name').value;
        const apellido = document.getElementById('surnmame').value;
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirmPassword').value;

        // Limpiar mensajes de error
        const errorEmail = document.getElementById('error-email');
        const errorNombre = document.getElementById('error-nombre');
        const errorApellido = document.getElementById('error-apellido');
        const errorPassword = document.getElementById('error-password');
        const errorConfirmPassword = document.getElementById('error-confirmPassword');

        errorNombre.style.display = 'none';
        errorEmail.style.display = 'none';
        errorPassword.style.display = 'none';
        errorConfirmPassword.style.display = 'none';

        // Validar Nombre
        if (nombre.length < 3 || nombre.length > 40) {
            errorNombre.textContent = "El nombre debe tener entre 3 y 40 caracteres.";
            errorNombre.style.display = 'block';
            isValid = false;
        }

        // Validar Correo Electrónico
        if (email.length < 3 || email.length > 40) {
            errorEmail.textContent = "El correo electrónico debe tener entre 3 y 40 caracteres.";
            errorEmail.style.display = 'block';
            isValid = false;
        }

        // Validar Contraseña
        if (password.length < 3 || password.length > 40) {
            errorPassword.textContent = "La contraseña debe tener entre 3 y 40 caracteres.";
            errorPassword.style.display = 'block';
            isValid = false;
        }

        // Validar Confirmación de Contraseña
        if (password !== confirmPassword) {
            errorConfirmPassword.textContent = "Las contraseñas no coinciden.";
            errorConfirmPassword.style.display = 'block';
            isValid = false;
        }

    return isValid;
}

    </script>

</body>
