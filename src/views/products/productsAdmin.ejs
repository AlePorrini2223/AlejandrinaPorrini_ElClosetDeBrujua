<%-include("../partials/head.ejs", {title: "Gestión de productos"})%> 

<body id="body-table">

   <%- include('../partials/headerAdmin.ejs') %>

   <h1 class="title-admin">Listado de Productos</h1>
   
   <div class="add-admin-product">
      <a href="./products/productAdd"><i class="fa-solid fa-plus"></i></a>
   </div>


   <table class="product-table">

      <thead>
            <tr>
               <th>ID</th>
               <th>Nombre Producto</th>
               <th>Descripcion</th>
               <th>Categoría</th>
               <th>Talle</th>
               <th>Precio</th>
               <th>Delete</th>
               <th>Edit</th>
            </tr>
      </thead>

      <tbody>
            <% productosCloset.forEach(product => { %>
            <tr>
               <td><%= product.id %></td>
               <td><%= product.nameProduct %></td>
               <td><%= product.description %></td>
               <td><%= product.category%></td>
               <td><%= product.size %></td>
               <td>$<span class="total-price"><%= product.price %></span></td>
               <td>
                  <a href="#"><i class="fa-solid fa-trash-can" class="eliminar-icon" onclick="confirmarEliminar(this)"></i></a></td>
                <td>
                  <a href="/products/productEdit/<%= product.id %>" id="editIcon"><i class="fa-solid fa-pen-to-square"></i></a>
                </td>
            </tr>
            <%  }); %>
      </tbody>
   </table>

      <script>
            // Eliminar producto del Listado
            function confirmarEliminar(icon) {
                const confirmar = confirm("¿Estás seguro de que deseas eliminar este producto?"); // muestra un cuadro de confirmación
               
                if (confirmar) {                                                    // Si el usuario confirma, eliminar el producto
                  const row = icon.parentElement;
                    row.remove();  // Elimina la fila de la tabla
                  alert("Producto eliminado exitosamente.");
               } else {
                  alert("Operación cancelada.");
               }
            }

      </script>
</body>

</html>